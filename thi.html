<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L√†m B√†i Thi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-full">
        <div class="header">
            <button class="home-btn" onclick="goBack()" title="Quay l·∫°i">
                <img src="logo.jpg" alt="Logo" class="logo-img">
            </button>
            
            <div style="flex:1; text-align:center; padding:0 10px">
                <div style="font-weight:700; font-size:0.9em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis" id="sectionTitle">Loading...</div>
                <div id="timer" style="font-size: 0.8em; color: var(--primary); font-weight: 800; margin-top: 2px;">Th·ªùi gian: 00:00</div>
            </div>

            <div style="display:flex; align-items:center; gap: 8px;">
                <button class="reset-btn" onclick="resetExam()" title="L√†m l·∫°i t·ª´ ƒë·∫ßu" style="background:none; border:none; cursor:pointer; font-size:1.2em">üîÑ</button>
                <button class="submit-btn" onclick="finishExam()">‚ú® N·ªôp b√†i</button>
            </div>
        </div>

        <div class="content">
            <div id="loading" style="text-align:center; margin-top:50px">ƒêang t·∫£i c√¢u h·ªèi...</div>
            <div id="quizArea" style="display:none">
                <div style="color:var(--primary); font-weight:bold; margin-bottom:5px" id="qNumber"></div>
                <div class="question-text" id="qText"></div>
                <div class="options-grid" id="optionsArea"></div>
            </div>
        </div>

        <div class="footer">
            <button class="btn" onclick="toggleModal()" style="background:#dfe6e9">‚ò∞</button>
            <button class="btn btn-nav" id="btnPrev" onclick="changeQuestion(-1)">‚ùÆ Tr∆∞·ªõc</button>
            <button class="btn btn-nav" id="btnNext" onclick="changeQuestion(1)">Ti·∫øp ‚ùØ</button>
        </div>

        <div class="modal" id="modalList">
            <div class="header">
                <h3>Danh s√°ch c√¢u h·ªèi</h3>
                <button class="btn" onclick="toggleModal()" style="color:red; background:none; font-size:1.5em">‚úï</button>
            </div>
            <div class="grid-map" id="gridMap"></div>
        </div>

        <div class="modal" id="modalResult" style="display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.5);">
            <div class="result-box">
                <div style="font-size:1.2em; font-weight:bold; color:#2d3436">K·∫æT QU·∫¢ B√ÄI THI</div>
                <div class="res-score" id="resScore">0</div>
                <div class="res-detail">
                    <div class="res-item" style="color:#00b894"><b id="resRight">0</b>ƒê√∫ng</div>
                    <div class="res-item" style="color:#d63031"><b id="resWrong">0</b>Sai</div>
                    <div class="res-item" style="color:#636e72"><b id="resSkip">0</b>B·ªè qua</div>
                </div>
                <div id="resTime" style="margin-bottom: 20px; font-weight: 600; color: var(--text-gray);">T·ªïng th·ªùi gian: 00:00</div>
                
                <div style="display:flex; gap:10px; justify-content:center; flex-wrap: wrap;">
                    <button class="btn-close-res" onclick="closeResult()" style="background:var(--primary)">Xem l·∫°i</button>
                    <button class="btn-close-res" onclick="resetExam()" style="background:#e17055">üîÑ Thi l·∫°i</button>
                    <button class="btn-close-res" onclick="goBack()" style="background:#636e72">Tho√°t</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        const p = new URLSearchParams(window.location.search);
        const fid = p.get('id');
        if(fid) {
            window.onload = () => loadExam(fid);
        } else {
            alert("L·ªói m√£ ƒë·ªÅ!"); window.location.href="index.html";
        }
        function goBack() { window.location.href = `product.html?id=${fid}`; }
        function closeResult() { document.getElementById('modalResult').style.display = 'none'; }
    </script>
    <script src="tet.js"></script>
</body>
</html>