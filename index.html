<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Danh SÃ¡ch Äá» Thi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-box">
        <div class="school-logos">
            <img src="logoutt.png" alt="UTT" class="logo-school">
            <img src="logobk.png" alt="BÃ¡ch Khoa" class="logo-school">
            <img src="logohpc.png" alt="HPC" class="logo-school">
            <img src="logo.jpg" alt="HPC" class="logo-school">
        </div>

        <div class="big-title">ğŸ“š NGÃ‚N HÃ€NG Äá»€</div>
        <div class="sub-title">ÄÆ¯á»¢C Bá»I CAO VÄ‚N NAM Táº O RA</div>
        <div class="grid-menu" id="menuGrid"></div>
    </div>

    <script>
        // ==========================================
        // âš™ï¸ CÃ€I Äáº¶T DANH SÃCH Äá»€ Táº I ÄÃ‚Y
        // ==========================================
        const danhSachDeThi = [
            { file: '11', ten: 'Viáº¿t BÃ¡o CÃ¡o 40 Ä‘áº§u' },
            { file: '12', ten: 'Viáº¿t BÃ¡o CÃ¡o 40 cuá»‘i' },
            { file: '13', ten: 'TRá»ŒN Bá»˜ VIáº¾T BÃO CÃO' },
            { ten: 'TIN Há»ŒC', url: 'tinhoc.html', icon: '' },

            { ten: 'Sá»¨C Bá»€N Váº¬T LIá»†U', url: 'sbvl.html', icon: 'ğŸ—ï¸' },
            { ten: 'App ANDROID', url: '/app/ONTHI.apk', icon: 'ğŸ—ï¸' },{ ten: 'App IOS', url: '/app/onthi.mobileconfig', icon: 'ğŸ—ï¸' },
           ,
        ];

        // ==========================================
// KIá»‚M TRA ÄÄ‚NG NHáº¬P
// ==========================================
(function checkLogin() {
    const userData = localStorage.getItem('current_user');
    
    if (!userData) {
        // ChÆ°a Ä‘Äƒng nháº­p, chuyá»ƒn Ä‘áº¿n trang login
        window.location.href = "login.html";
        return;
    }
    
    // ÄÃ£ Ä‘Äƒng nháº­p, hiá»ƒn thá»‹ tÃªn ngÆ°á»i dÃ¹ng
    try {
        const user = JSON.parse(userData);
        const subTitle = document.querySelector('.sub-title');
        if (subTitle && user.username) {
            subTitle.innerHTML = `Xin chÃ o: <strong style="color:#d63031">${user.username}</strong> | ÄÆ¯á»¢C Bá»I CAO VÄ‚N NAM Táº O RA`;
            
            // ThÃªm nÃºt Ä‘á»•i tÃªn
            const changeNameBtn = document.createElement('button');
            changeNameBtn.innerHTML = 'âœï¸ Äá»•i tÃªn';
            changeNameBtn.style.cssText = `
                background: #f39c12;
                color: white;
                border: none;
                padding: 5px 10px;
                border-radius: 20px;
                font-size: 0.7em;
                cursor: pointer;
                margin-left: 10px;
                font-weight: bold;
            `;
            changeNameBtn.onclick = function() {
                if (confirm("Báº¡n muá»‘n Ä‘Äƒng nháº­p vá»›i tÃªn khÃ¡c?")) {
                    localStorage.removeItem('current_user');
                    window.location.href = "login.html";
                }
            };
            
            subTitle.appendChild(changeNameBtn);
        }
    } catch (e) {
        console.error("Lá»—i Ä‘á»c thÃ´ng tin ngÆ°á»i dÃ¹ng:", e);
    }
})();
        // ==========================================
// TRANG WWEB 
// ==========================================\
           

        const menuGrid = document.getElementById('menuGrid');
        
danhSachDeThi.forEach(item => {
    const btn = document.createElement('div');
    btn.className = 'menu-btn';
    
    // Máº·c Ä‘á»‹nh icon lÃ  thÆ° má»¥c, náº¿u cÃ³ icon riÃªng thÃ¬ láº¥y icon Ä‘Ã³
    let displayIcon = item.icon || 'ğŸ§§';
    let badge = '';

    // Chá»‰ hiá»ƒn thá»‹ Ä‘iá»ƒm Ä‘á»‘i vá»›i cÃ¡c bÃ i thi (cÃ³ thuá»™c tÃ­nh 'file')
    if (item.file) {
        const savedData = localStorage.getItem('quiz_data_' + item.file);
        if (savedData) {
            const parsed = JSON.parse(savedData);
            if(parsed.isSubmitted && parsed.score !== undefined) {
                badge = `<div class="badge-score">Äiá»ƒm: ${parsed.score}</div>`;
            } else if (parsed.history && parsed.history.some(h => h.userSelected !== null)) {
                badge = `<div class="badge-score" style="background:#3498db">Äang lÃ m</div>`;
            }
        }
    }

    btn.innerHTML = `
        <div style="font-size:2em; margin-bottom:5px">${displayIcon}</div> 
        <div style="font-weight:700; font-size:0.9em">${item.ten}</div> 
        ${badge}
    `;
    
    // Logic xá»­ lÃ½ khi click
    btn.onclick = () => {
        if (item.url) {
            // Náº¿u cÃ³ URL thÃ¬ chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang Ä‘Ã³
            window.location.href = item.url;
        } else {
            // Náº¿u lÃ  Ä‘á» thi thÃ¬ chuyá»ƒn Ä‘áº¿n trang lÃ m bÃ i
            window.location.href = `product.html?id=${item.file}&name=${encodeURIComponent(item.ten)}`;
        }
    };
    menuGrid.appendChild(btn);
});
    </script>
    <script src="tet.js"></script>
</body>
</html>